# INIT
units		metal
dimension	3
boundary	p p f
atom_style	atomic
atom_modify	map yes
read_data	fall_s.input.data

# GROUPS
group		g_fu id 162433:162492
group		g_si_all id 1:162432
lattice         diamond 5.43 orient x 1 0 0 orient y 0 1 0 orient z 0 0 1
region		r_si_center block -11 11 -11 11 -34 0 units lattice
group		g_si_center region r_si_center
group		g_si_thermostat subtract g_si_all g_si_center
group		g_output id 1

# GROUPS FOR SPIN
group		g_a_d id 162489
group		g_a_u id 162458
group		g_a_l id 162436
group		g_a_r id 162460

# POTENTIAL
pair_style	hybrid airebo 3.0 tersoff/zbl
pair_coeff	* * tersoff/zbl SiC.tersoff.zbl Si C
pair_coeff	2 2 none
pair_coeff	* * airebo CH.airebo NULL C
neighbor	3.0 bin

# COMPUTES
compute		vOcu g_si_all voronoi/atom occupation

variable	vVac atom "c_vOcu[1]==0"
compute		vVac g_si_all reduce sum v_vVac
variable	vVacF atom "c_vVac"

variable	vIntTemp1 atom "c_vOcu[1]*(c_vOcu[1]>1)"
# compute		vIntTemp1 g_si_all reduce sum v_vIntTemp1

variable	vIntTemp2 atom "c_vOcu[1]>1"
# compute		vIntTemp2 g_si_all reduce sum v_vIntTemp2

variable	vInt atom "v_vIntTemp1-v_vIntTemp2"
compute		vInt g_si_all reduce sum v_vInt

# THERMO
reset_timestep	0
timestep	0.001
thermo          20
thermo_style    custom step ke
thermo_modify	lost ignore

# FIX
fix		f_1 all nve
fix		f_2 g_si_thermostat nvt temp 1e-3 1e-3 $(100.0*dt)

# DUMP
dump		d_vor g_output custom 20 vac_time.dump v_vVacF

# VELOCITY FU
velocity	g_fu set NULL NULL -231 sum yes units box

# VELOCITY SPIN
velocity        g_a_d set NULL NULL -150 sum yes units box
velocity        g_a_u set NULL NULL 150 sum yes units box
velocity        g_a_l set NULL -150 NULL sum yes units box
velocity        g_a_r set NULL 150 NULL sum yes units box

# RUN
run		100

# WRITE DATA
write_data	fall.output.data
